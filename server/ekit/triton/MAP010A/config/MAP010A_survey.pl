bless({
  _SID           => "MAP010A",
  _TritonRoot    => "/home/vhosts/pwidev/triton",
  _config_subdir => "config",
  _data_subdir   => "web",
  _doc_root      => undef,
  _doc_subdir    => "doc",
  _final_subdir  => "final",
  _html_subdir   => "html",
  _masks         => {},
  _options       => {
                      allow_restart    => 1,
                      block_size       => 5,
                      custom_footer    => "<center><img src=\"/themes/ekit/ekit.daa.png\" alt=\"Discipline, Accountability, Achievement\" ></center>",
                      dive_in          => 1,
                      focus_off        => 1,
                      mailto           => "ctwebb\@mapconsulting.com",
                      no_copy          => 1,
                      no_progress_bar  => 1,
                      one_at_a_time    => 0,
                      optional_written => 0,
                      qbanner          => "<table border=0 cellpadding=0 cellspacing=0 class=\"bannertable\"><tr><TD class=\"bannerlogo\">&nbsp;<TD width=\"50px\" >&nbsp;<tr><TD class=\"bluebar\"> &nbsp;&nbsp; Key Personnel List<TH class=\"bluebarq\">Q10A</table>",
                      qscale           => "<P><%q_label%>",
                      survey_id        => "MAP010A",
                      survey_name      => "Key Personnel List",
                      thankyou_url     => "thanks.htm",
                      theme            => "ekit2",
                      window_title     => "Q10A - Key Personnel List",
                    },
  _questions     => [
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _code       => [
                                         "ws_details=ws_details",
                                         "id=id",
                                         "token=token",
                                         "warning=warning",
                                         "q_label=q_label",
                                         "duedate=duedate",
                                         "story=story",
                                         "login_page=login_page",
                                         "qbanner=qbanner",
                                         "qscale=qscale",
                                       ],
                        _dataInfo   => [],
                        _label      => "AA",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "",
                        _qnum       => 1,
                        _qtype      => 20,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _dataInfo   => [],
                        _label      => "A",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "<%qbanner%>",
                        _qnum       => 2,
                        _qtype      => 7,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames    => [],
                        _attributes    => [],
                        _dataInfo      => [
                                            {
                                              "pos" => 0,
                                              rkey => "ext_q_labs",
                                              var => "q_labs",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname1",
                                              type => "text",
                                              var => "peerfirstname1",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname1",
                                              type => "text",
                                              var => "peerlastname1",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail1",
                                              type => "text",
                                              var => "peeremail1",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname2",
                                              type => "text",
                                              var => "peerfirstname2",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname2",
                                              type => "text",
                                              var => "peerlastname2",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail2",
                                              type => "text",
                                              var => "peeremail2",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname3",
                                              type => "text",
                                              var => "peerfirstname3",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname3",
                                              type => "text",
                                              var => "peerlastname3",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail3",
                                              type => "text",
                                              var => "peeremail3",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname4",
                                              type => "text",
                                              var => "peerfirstname4",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname4",
                                              type => "text",
                                              var => "peerlastname4",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail4",
                                              type => "text",
                                              var => "peeremail4",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname5",
                                              type => "text",
                                              var => "peerfirstname5",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname5",
                                              type => "text",
                                              var => "peerlastname5",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail5",
                                              type => "text",
                                              var => "peeremail5",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname6",
                                              type => "text",
                                              var => "peerfirstname6",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname6",
                                              type => "text",
                                              var => "peerlastname6",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail6",
                                              type => "text",
                                              var => "peeremail6",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname7",
                                              type => "text",
                                              var => "peerfirstname7",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname7",
                                              type => "text",
                                              var => "peerlastname7",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail7",
                                              type => "text",
                                              var => "peeremail7",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname8",
                                              type => "text",
                                              var => "peerfirstname8",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname8",
                                              type => "text",
                                              var => "peerlastname8",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail8",
                                              type => "text",
                                              var => "peeremail8",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname9",
                                              type => "text",
                                              var => "peerfirstname9",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname9",
                                              type => "text",
                                              var => "peerlastname9",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail9",
                                              type => "text",
                                              var => "peeremail9",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname10",
                                              type => "text",
                                              var => "peerfirstname10",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname10",
                                              type => "text",
                                              var => "peerlastname10",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail10",
                                              type => "text",
                                              var => "peeremail10",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname11",
                                              type => "text",
                                              var => "peerfirstname11",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname11",
                                              type => "text",
                                              var => "peerlastname11",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail11",
                                              type => "text",
                                              var => "peeremail11",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname12",
                                              type => "text",
                                              var => "peerfirstname12",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname12",
                                              type => "text",
                                              var => "peerlastname12",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail12",
                                              type => "text",
                                              var => "peeremail12",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname13",
                                              type => "text",
                                              var => "peerfirstname13",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname13",
                                              type => "text",
                                              var => "peerlastname13",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail13",
                                              type => "text",
                                              var => "peeremail13",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname14",
                                              type => "text",
                                              var => "peerfirstname14",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname14",
                                              type => "text",
                                              var => "peerlastname14",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail14",
                                              type => "text",
                                              var => "peeremail14",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname15",
                                              type => "text",
                                              var => "peerfirstname15",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname15",
                                              type => "text",
                                              var => "peerlastname15",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail15",
                                              type => "text",
                                              var => "peeremail15",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname16",
                                              type => "text",
                                              var => "peerfirstname16",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname16",
                                              type => "text",
                                              var => "peerlastname16",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail16",
                                              type => "text",
                                              var => "peeremail16",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname17",
                                              type => "text",
                                              var => "peerfirstname17",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname17",
                                              type => "text",
                                              var => "peerlastname17",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail17",
                                              type => "text",
                                              var => "peeremail17",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname18",
                                              type => "text",
                                              var => "peerfirstname18",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname18",
                                              type => "text",
                                              var => "peerlastname18",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail18",
                                              type => "text",
                                              var => "peeremail18",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname19",
                                              type => "text",
                                              var => "peerfirstname19",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname19",
                                              type => "text",
                                              var => "peerlastname19",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail19",
                                              type => "text",
                                              var => "peeremail19",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerfirstname20",
                                              type => "text",
                                              var => "peerfirstname20",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 12,
                                              "pos" => 0,
                                              rkey => "ext_peerlastname20",
                                              type => "text",
                                              var => "peerlastname20",
                                              var_label => "Key Personnel List",
                                            },
                                            {
                                              "length" => 36,
                                              "pos" => 0,
                                              rkey => "ext_peeremail20",
                                              type => "text",
                                              var => "peeremail20",
                                              var_label => "Key Personnel List",
                                            },
                                          ],
                        _external_info => {
                                            names    => [
                                                          "q_labs",
                                                          "peerfirstname1",
                                                          "peerlastname1",
                                                          "peeremail1",
                                                          "peerfirstname2",
                                                          "peerlastname2",
                                                          "peeremail2",
                                                          "peerfirstname3",
                                                          "peerlastname3",
                                                          "peeremail3",
                                                          "peerfirstname4",
                                                          "peerlastname4",
                                                          "peeremail4",
                                                          "peerfirstname5",
                                                          "peerlastname5",
                                                          "peeremail5",
                                                          "peerfirstname6",
                                                          "peerlastname6",
                                                          "peeremail6",
                                                          "peerfirstname7",
                                                          "peerlastname7",
                                                          "peeremail7",
                                                          "peerfirstname8",
                                                          "peerlastname8",
                                                          "peeremail8",
                                                          "peerfirstname9",
                                                          "peerlastname9",
                                                          "peeremail9",
                                                          "peerfirstname10",
                                                          "peerlastname10",
                                                          "peeremail10",
                                                          "peerfirstname11",
                                                          "peerlastname11",
                                                          "peeremail11",
                                                          "peerfirstname12",
                                                          "peerlastname12",
                                                          "peeremail12",
                                                          "peerfirstname13",
                                                          "peerlastname13",
                                                          "peeremail13",
                                                          "peerfirstname14",
                                                          "peerlastname14",
                                                          "peeremail14",
                                                          "peerfirstname15",
                                                          "peerlastname15",
                                                          "peeremail15",
                                                          "peerfirstname16",
                                                          "peerlastname16",
                                                          "peeremail16",
                                                          "peerfirstname17",
                                                          "peerlastname17",
                                                          "peeremail17",
                                                          "peerfirstname18",
                                                          "peerlastname18",
                                                          "peeremail18",
                                                          "peerfirstname19",
                                                          "peerlastname19",
                                                          "peeremail19",
                                                          "peerfirstname20",
                                                          "peerlastname20",
                                                          "peeremail20",
                                                        ],
                                            options  => {
                                                          peeremail1      => {
                                                                               "<%disabled1%" => "<%disabled1%",
                                                                               class => "input",
                                                                               name => "peeremail1",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail10     => {
                                                                               "<%disabled10%" => "<%disabled10%",
                                                                               class => "input",
                                                                               name => "peeremail10",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail11     => {
                                                                               "<%disabled11%" => "<%disabled11%",
                                                                               class => "input",
                                                                               name => "peeremail11",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail12     => {
                                                                               "<%disabled12%" => "<%disabled12%",
                                                                               class => "input",
                                                                               name => "peeremail12",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail13     => {
                                                                               "<%disabled13%" => "<%disabled13%",
                                                                               class => "input",
                                                                               name => "peeremail13",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail14     => {
                                                                               "<%disabled14%" => "<%disabled14%",
                                                                               class => "input",
                                                                               name => "peeremail14",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail15     => {
                                                                               "<%disabled15%" => "<%disabled15%",
                                                                               class => "input",
                                                                               name => "peeremail15",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail16     => {
                                                                               "<%disabled16%" => "<%disabled16%",
                                                                               class => "input",
                                                                               name => "peeremail16",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail17     => {
                                                                               "<%disabled17%" => "<%disabled17%",
                                                                               class => "input",
                                                                               name => "peeremail17",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail18     => {
                                                                               "<%disabled18%" => "<%disabled18%",
                                                                               class => "input",
                                                                               name => "peeremail18",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail19     => {
                                                                               "<%disabled19%" => "<%disabled19%",
                                                                               class => "input",
                                                                               name => "peeremail19",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail2      => {
                                                                               "<%disabled2%" => "<%disabled2%",
                                                                               class => "input",
                                                                               name => "peeremail2",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail20     => {
                                                                               "<%disabled20%" => "<%disabled20%",
                                                                               class => "input",
                                                                               name => "peeremail20",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail3      => {
                                                                               "<%disabled3%" => "<%disabled3%",
                                                                               class => "input",
                                                                               name => "peeremail3",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail4      => {
                                                                               "<%disabled4%" => "<%disabled4%",
                                                                               class => "input",
                                                                               name => "peeremail4",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail5      => {
                                                                               "<%disabled5%" => "<%disabled5%",
                                                                               class => "input",
                                                                               name => "peeremail5",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail6      => {
                                                                               "<%disabled6%" => "<%disabled6%",
                                                                               class => "input",
                                                                               name => "peeremail6",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail7      => {
                                                                               "<%disabled7%" => "<%disabled7%",
                                                                               class => "input",
                                                                               name => "peeremail7",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail8      => {
                                                                               "<%disabled8%" => "<%disabled8%",
                                                                               class => "input",
                                                                               name => "peeremail8",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peeremail9      => {
                                                                               "<%disabled9%" => "<%disabled9%",
                                                                               class => "input",
                                                                               name => "peeremail9",
                                                                               onchange => "yuk()",
                                                                               size => 36,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname1  => {
                                                                               "<%disabled1%" => "<%disabled1%",
                                                                               class => "input",
                                                                               name => "peerfirstname1",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname10 => {
                                                                               "<%disabled10%" => "<%disabled10%",
                                                                               class => "input",
                                                                               name => "peerfirstname10",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname11 => {
                                                                               "<%disabled11%" => "<%disabled11%",
                                                                               class => "input",
                                                                               name => "peerfirstname11",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname12 => {
                                                                               "<%disabled12%" => "<%disabled12%",
                                                                               class => "input",
                                                                               name => "peerfirstname12",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname13 => {
                                                                               "<%disabled13%" => "<%disabled13%",
                                                                               class => "input",
                                                                               name => "peerfirstname13",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname14 => {
                                                                               "<%disabled14%" => "<%disabled14%",
                                                                               class => "input",
                                                                               name => "peerfirstname14",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname15 => {
                                                                               "<%disabled15%" => "<%disabled15%",
                                                                               class => "input",
                                                                               name => "peerfirstname15",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname16 => {
                                                                               "<%disabled16%" => "<%disabled16%",
                                                                               class => "input",
                                                                               name => "peerfirstname16",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname17 => {
                                                                               "<%disabled17%" => "<%disabled17%",
                                                                               class => "input",
                                                                               name => "peerfirstname17",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname18 => {
                                                                               "<%disabled18%" => "<%disabled18%",
                                                                               class => "input",
                                                                               name => "peerfirstname18",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname19 => {
                                                                               "<%disabled19%" => "<%disabled19%",
                                                                               class => "input",
                                                                               name => "peerfirstname19",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname2  => {
                                                                               "<%disabled2%" => "<%disabled2%",
                                                                               class => "input",
                                                                               name => "peerfirstname2",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname20 => {
                                                                               "<%disabled20%" => "<%disabled20%",
                                                                               class => "input",
                                                                               name => "peerfirstname20",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname3  => {
                                                                               "<%disabled3%" => "<%disabled3%",
                                                                               class => "input",
                                                                               name => "peerfirstname3",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname4  => {
                                                                               "<%disabled4%" => "<%disabled4%",
                                                                               class => "input",
                                                                               name => "peerfirstname4",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname5  => {
                                                                               "<%disabled5%" => "<%disabled5%",
                                                                               class => "input",
                                                                               name => "peerfirstname5",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname6  => {
                                                                               "<%disabled6%" => "<%disabled6%",
                                                                               class => "input",
                                                                               name => "peerfirstname6",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname7  => {
                                                                               "<%disabled7%" => "<%disabled7%",
                                                                               class => "input",
                                                                               name => "peerfirstname7",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname8  => {
                                                                               "<%disabled8%" => "<%disabled8%",
                                                                               class => "input",
                                                                               name => "peerfirstname8",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerfirstname9  => {
                                                                               "<%disabled9%" => "<%disabled9%",
                                                                               class => "input",
                                                                               name => "peerfirstname9",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname1   => {
                                                                               "<%disabled1%" => "<%disabled1%",
                                                                               class => "input",
                                                                               name => "peerlastname1",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname10  => {
                                                                               "<%disabled10%" => "<%disabled10%",
                                                                               class => "input",
                                                                               name => "peerlastname10",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname11  => {
                                                                               "<%disabled11%" => "<%disabled11%",
                                                                               class => "input",
                                                                               name => "peerlastname11",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname12  => {
                                                                               "<%disabled12%" => "<%disabled12%",
                                                                               class => "input",
                                                                               name => "peerlastname12",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname13  => {
                                                                               "<%disabled13%" => "<%disabled13%",
                                                                               class => "input",
                                                                               name => "peerlastname13",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname14  => {
                                                                               "<%disabled14%" => "<%disabled14%",
                                                                               class => "input",
                                                                               name => "peerlastname14",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname15  => {
                                                                               "<%disabled15%" => "<%disabled15%",
                                                                               class => "input",
                                                                               name => "peerlastname15",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname16  => {
                                                                               "<%disabled16%" => "<%disabled16%",
                                                                               class => "input",
                                                                               name => "peerlastname16",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname17  => {
                                                                               "<%disabled17%" => "<%disabled17%",
                                                                               class => "input",
                                                                               name => "peerlastname17",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname18  => {
                                                                               "<%disabled18%" => "<%disabled18%",
                                                                               class => "input",
                                                                               name => "peerlastname18",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname19  => {
                                                                               "<%disabled19%" => "<%disabled19%",
                                                                               class => "input",
                                                                               name => "peerlastname19",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname2   => {
                                                                               "<%disabled2%" => "<%disabled2%",
                                                                               class => "input",
                                                                               name => "peerlastname2",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname20  => {
                                                                               "<%disabled20%" => "<%disabled20%",
                                                                               class => "input",
                                                                               name => "peerlastname20",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname3   => {
                                                                               "<%disabled3%" => "<%disabled3%",
                                                                               class => "input",
                                                                               name => "peerlastname3",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname4   => {
                                                                               "<%disabled4%" => "<%disabled4%",
                                                                               class => "input",
                                                                               name => "peerlastname4",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname5   => {
                                                                               "<%disabled5%" => "<%disabled5%",
                                                                               class => "input",
                                                                               name => "peerlastname5",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname6   => {
                                                                               "<%disabled6%" => "<%disabled6%",
                                                                               class => "input",
                                                                               name => "peerlastname6",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname7   => {
                                                                               "<%disabled7%" => "<%disabled7%",
                                                                               class => "input",
                                                                               name => "peerlastname7",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname8   => {
                                                                               "<%disabled8%" => "<%disabled8%",
                                                                               class => "input",
                                                                               name => "peerlastname8",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          peerlastname9   => {
                                                                               "<%disabled9%" => "<%disabled9%",
                                                                               class => "input",
                                                                               name => "peerlastname9",
                                                                               onchange => "yuk()",
                                                                               size => 12,
                                                                               type => "text",
                                                                             },
                                                          q_labs          => {},
                                                        },
                                            "values" => {},
                                          },
                        _label         => 1,
                        _opt           => { external => "keyout2.htm", instr => "", scale => 0 },
                        _prompt        => "Key Personnel List",
                        _qnum          => 3,
                        _qtype         => 7,
                        _scores        => [],
                        _setvalues     => [],
                        _skips         => [],
                        _vars          => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _code       => [
                                         "require 'TPerl/360-lib.pl';",
                                         "\$simulate_frames = 0;\t\t# Prevent simulated frames from being used",
                                         "require 'TPerl/pwikit_cfg.pl';",
                                         "foreach (my \$n=1;\$n<=\$config{npeer};\$n++)",
                                         "{",
                                         "\$resp{\"ext_peerfirstname\$n\"} = \$resp{\"peerfirstname\$n\"};",
                                         "\$resp{\"ext_peerlastname\$n\"} = \$resp{\"peerlastname\$n\"};",
                                         "\$resp{\"ext_peeremail\$n\"} = \$resp{\"peeremail\$n\"};",
                                         "}",
                                       ],
                        _dataInfo   => [],
                        _label      => "1A",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "Split names",
                        _qnum       => 4,
                        _qtype      => 27,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _code       => [
                                         "require 'TPerl/360-lib.pl';",
                                         "\$simulate_frames = 0;\t\t# Prevent simulated frames from being used",
                                         "require 'TPerl/pwikit_cfg.pl';",
                                         "my \@peers = ();",
                                         "my \@tpeers = ();",
                                         "my \@checks = ();",
                                         "my \$back2 = &input('BACK2');",
                                         "\$back2 =~ s/^\\s+//;\t\t# Netscape 4.7 gives us spaces",
                                         "my \$show_password = 0;",
                                         "# Get a list of the boss email addresses (Can't invite them to do this):",
                                         "my %verboten = ();",
                                         "foreach (my \$n=1;\$n<=\$config{nboss};\$n++)",
                                         "{",
                                         "\$verboten{lc(\$resp{\"bossemail\$n\"})}++ if (\$resp{\"bossemail\$n\"} ne '');",
                                         "}",
                                         "#",
                                         "# Also make sure they cannot add themselves to the list (Although we cannot guard against other personal email addresses):",
                                         "#",
                                         "\$verboten{lc(\$resp{email})}++;",
                                         "",
                                         "&db_conn;",
                                         "&debug(\"just saving names...\");",
                                         "my \$pwd = \$resp{token};",
                                         "my_require(\"\$qt_root/\$config{participant}/web/u\$pwd.pl\");\t\t# Bring in the ufile first",
                                         "foreach (my \$n=1;\$n<=\$config{npeer};\$n++)",
                                         "{",
                                         "\$peers[\$n-1] = 0;",
                                         "\$checks[\$n-1] = '';",
                                         "my \$firstname = &input(\"peerfirstname\$n\");\t# We grab the input, to prevent it being saved to the resp Hash as ext_...",
                                         "my \$lastname = &input(\"peerlastname\$n\");",
                                         "my \$email = &input(\"peeremail\$n\");",
                                         "if (\$resp{\"disabled\$n\"} ne '')",
                                         "{",
                                         "\$firstname = \$resp{\"peerfirstname\$n\"};",
                                         "\$lastname = \$resp{\"peerlastname\$n\"};",
                                         "\$email = \$resp{\"peeremail\$n\"};",
                                         "}",
                                         "my \$fullname = mk_fullname(\$firstname,\$lastname);",
                                         "\$ufields{peerfirstname} = \$ufields{\"peerfirstname\$n\"} = \$resp{\"peerfirstname\$n\"} = \$firstname;",
                                         "\$ufields{peerlastname}  = \$ufields{\"peerlastname\$n\"}  = \$resp{\"peerlastname\$n\"}  = \$lastname;",
                                         "\$ufields{who} = \$ufields{peerfullname}  = \$ufields{\"peerfullname\$n\"}  = \$resp{\"peerfullname\$n\"}  = \$fullname;",
                                         "\$ufields{\"peeremail\$n\"}     = \$resp{\"peeremail\$n\"}     = \$email;",
                                         "if (\$fullname ne '')",
                                         "{",
                                         "debug(\"n=\$n, \".\$resp{\"peerfirstname\$n\"});",
                                         "\$peers[\$n-1] = 1;",
                                         "\$tpeers[\$n-1] = \"\$n. \$fullname (\$email)\";",
                                         "my \$pwd = \$resp{\"peerpassword\$n\"};",
                                         "if (\$pwd eq '')",
                                         "{",
                                         "\$resp{\"peerpassword\$n\"} = db_getnextpwd(\$config{master});",
                                         "\$ufields{\"peerpassword\$n\"} = \$resp{\"peerpassword\$n\"};",
                                         "\$pwd = \$resp{\"peerpassword\$n\"};",
                                         "db_add_invite(\$config{index},\$config{case},\$config{peer},\$resp{id},\$pwd,\$fullname,'Peer',\$resp{batchno},0);",
                                         "db_save_pwd_full(\$config{master},\$resp{id},\$pwd,\$fullname,0,\$resp{batchno},\$email);",
                                         "db_save_pwd_full(\$config{peer},\$resp{id},\$pwd,\$fullname,0,\$resp{batchno},\$email);",
                                         "}",
                                         "\$tpeers[\$n-1] .= qq{[\$pwd]} if \$show_password;",
                                         "if (\$resp{\"peersent\$n\"} ne '')",
                                         "{",
                                         "my \$now_string = localtime(\$resp{\"peersent\$n\"});",
                                         "\$tpeers[\$n-1] .= qq{ <I><B>email last sent at \$now_string <I></B>};",
                                         "\$resp{\"disabled\$n\"} = \"DISABLED\";",
                                         "}",
                                         "\$checks[\$n-1] = 1 if (\$resp{\"peersent\$n\"} eq '');\t# Turn new ones (ie unsent) on",
                                         "\$checks[\$n-1] = 1 if (\$input{\"peeremail\$n\"} ne \$resp{\"ext_peeremail\$n\"});\t# Turn new ones (ie unsent) on",
                                         "if (\$verboten{lc(\$email)})",
                                         "{",
                                         "\$tpeers[\$n-1] .= qq{<FONT color=\"red\" size=\"+1\"> - <B>Error:</B> You cannot include yourself, your supervising manager or partner on this list, please go back and correct it.</FONT>};",
                                         "\$checks[\$n-1] = -1;\t# -1 Means disable the control",
                                         "}",
                                         "\$checks[\$n-1] = 0 if (\$resp{\"disabled\$n\"} ne '');",
                                         "",
                                         "my \@mylist = \@{\$config{peerlist}};",
                                         "my \$jobtitle = \$ufields{jobtitle};",
                                         "#\t\t\t&debug(\"roles\\->\$jobtitle\\->peerlist\\[0\\]=\".\$config{roles}{\$jobtitle}{peerlist}[0]);",
                                         "if (\$config{roles}{\$jobtitle}{peerlist}[0] ne '')",
                                         "{",
                                         "\@mylist = \@{\$config{roles}{\$jobtitle}{peerlist}};",
                                         "}",
                                         "my %extras = ();",
                                         "\$extras{fullname} = \$ufields{\"peerfullname\$n\"};",
                                         "&db_save_extras(\$config{index},\$pwd,\\%extras);",
                                         "\$extras{email} = \$ufields{\"peeremail\$n\"};",
                                         "foreach my \$mysid (\@mylist)",
                                         "{",
                                         "&debug(\"Updating peer \$n info\");",
                                         "&save_ufile(\$mysid,\$pwd);",
                                         "update_dfile(\$mysid,\$resp{id},\$resp{\"peerpassword\$n\"});",
                                         "&db_save_extras(\$mysid,\$resp{\"peerpassword\$n\"},\\%extras);",
                                         "}",
                                         "debug(\"n=\$n, \".\$resp{\"peerfirstname\$n\"});",
                                         "}",
                                         "}",
                                         "\$resp{mask_peers} = join(\$array_sep,\@peers);",
                                         "\$resp{maskt_peers} = join(\$array_sep,\@tpeers);",
                                         "\$resp{_Q2} = join(\$array_sep,\@checks);",
                                         "\$data_dir = \"\${qt_root}/\$input{survey_id}/web\";",
                                         "\$resp{survey_id} = \$input{survey_id};",
                                         "&qt_save;",
                                         "save_ufile(\$config{participant},\$resp{token});",
                                         "&db_disc;",
                                       ],
                        _dataInfo   => [],
                        _label      => "1B",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "Receive names",
                        _qnum       => 5,
                        _qtype      => 27,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
                        _dataInfo   => [
                                         {
                                           maskpos => { mask => 0 },
                                           "pos" => 0,
                                           rkey => "_Q2A",
                                           val_if_true => 1,
                                           val_label => { 1 => 1 },
                                           var => "Q2A1",
                                           var_label => "1-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 1 },
                                           "pos" => 1,
                                           rkey => "_Q2A",
                                           val_if_true => 2,
                                           val_label => { 2 => 2 },
                                           var => "Q2A2",
                                           var_label => "2-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 2 },
                                           "pos" => 2,
                                           rkey => "_Q2A",
                                           val_if_true => 3,
                                           val_label => { 3 => 3 },
                                           var => "Q2A3",
                                           var_label => "3-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 3 },
                                           "pos" => 3,
                                           rkey => "_Q2A",
                                           val_if_true => 4,
                                           val_label => { 4 => 4 },
                                           var => "Q2A4",
                                           var_label => "4-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 4 },
                                           "pos" => 4,
                                           rkey => "_Q2A",
                                           val_if_true => 5,
                                           val_label => { 5 => 5 },
                                           var => "Q2A5",
                                           var_label => "5-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 5 },
                                           "pos" => 5,
                                           rkey => "_Q2A",
                                           val_if_true => 6,
                                           val_label => { 6 => 6 },
                                           var => "Q2A6",
                                           var_label => "6-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 6 },
                                           "pos" => 6,
                                           rkey => "_Q2A",
                                           val_if_true => 7,
                                           val_label => { 7 => 7 },
                                           var => "Q2A7",
                                           var_label => "7-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 7 },
                                           "pos" => 7,
                                           rkey => "_Q2A",
                                           val_if_true => 8,
                                           val_label => { 8 => 8 },
                                           var => "Q2A8",
                                           var_label => "8-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 8 },
                                           "pos" => 8,
                                           rkey => "_Q2A",
                                           val_if_true => 9,
                                           val_label => { 9 => 9 },
                                           var => "Q2A9",
                                           var_label => "9-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 9 },
                                           "pos" => 9,
                                           rkey => "_Q2A",
                                           val_if_true => 10,
                                           val_label => { 10 => 10 },
                                           var => "Q2A10",
                                           var_label => "10-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 10 },
                                           "pos" => 10,
                                           rkey => "_Q2A",
                                           val_if_true => 11,
                                           val_label => { 11 => 11 },
                                           var => "Q2A11",
                                           var_label => "11-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 11 },
                                           "pos" => 11,
                                           rkey => "_Q2A",
                                           val_if_true => 12,
                                           val_label => { 12 => 12 },
                                           var => "Q2A12",
                                           var_label => "12-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 12 },
                                           "pos" => 12,
                                           rkey => "_Q2A",
                                           val_if_true => 13,
                                           val_label => { 13 => 13 },
                                           var => "Q2A13",
                                           var_label => "13-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 13 },
                                           "pos" => 13,
                                           rkey => "_Q2A",
                                           val_if_true => 14,
                                           val_label => { 14 => 14 },
                                           var => "Q2A14",
                                           var_label => "14-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 14 },
                                           "pos" => 14,
                                           rkey => "_Q2A",
                                           val_if_true => 15,
                                           val_label => { 15 => 15 },
                                           var => "Q2A15",
                                           var_label => "15-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 15 },
                                           "pos" => 15,
                                           rkey => "_Q2A",
                                           val_if_true => 16,
                                           val_label => { 16 => 16 },
                                           var => "Q2A16",
                                           var_label => "16-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 16 },
                                           "pos" => 16,
                                           rkey => "_Q2A",
                                           val_if_true => 17,
                                           val_label => { 17 => 17 },
                                           var => "Q2A17",
                                           var_label => "17-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 17 },
                                           "pos" => 17,
                                           rkey => "_Q2A",
                                           val_if_true => 18,
                                           val_label => { 18 => 18 },
                                           var => "Q2A18",
                                           var_label => "18-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 18 },
                                           "pos" => 18,
                                           rkey => "_Q2A",
                                           val_if_true => 19,
                                           val_label => { 19 => 19 },
                                           var => "Q2A19",
                                           var_label => "19-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                         {
                                           maskpos => { mask => 19 },
                                           "pos" => 19,
                                           rkey => "_Q2A",
                                           val_if_true => 20,
                                           val_label => { 20 => 20 },
                                           var => "Q2A20",
                                           var_label => "20-Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                                         },
                                       ],
                        _label      => "2A",
                        _opt        => {
                                         instr => "Click the NEXT button below to send emails to the names checked above",
                                         mask_include => "peers",
                                         required => 0,
                                         scale => 0,
                                       },
                        _prompt     => "Below is a list of the names you have provided. <P>We will send these people an email, giving them the opportunity to complete the form online. If they do so, they will not need to fax the form to us.<P>Please select which of these people should receive emails now:",
                        _qnum       => 6,
                        _qtype      => 2,
                        _scores     => [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        _setvalues  => [
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                       ],
                        _skips      => [
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                       ],
                        _vars       => [
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                         undef,
                                       ],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _code       => [
                                         "require 'TPerl/360-lib.pl';",
                                         "\$simulate_frames = 0;\t\t# Prevent simulated frames from being used",
                                         "require 'TPerl/pwikit_cfg.pl';",
                                         "my \@peers = ();",
                                         "my \@tpeers = ();",
                                         "my \@checks = ();",
                                         "my \$back2 = &input('BACK2');",
                                         "\$back2 =~ s/^\\s+//;\t\t# Netscape 4.7 gives us spaces",
                                         "my \$show_password = 0;",
                                         "# Get a list of the boss email addresses (Can't invite them to do this):",
                                         "my %verboten = ();",
                                         "foreach (my \$n=1;\$n<=\$config{nboss};\$n++)",
                                         "{",
                                         "\$verboten{lc(\$resp{\"bossemail\$n\"})}++ if (\$resp{\"bossemail\$n\"} ne '');",
                                         "}",
                                         "#",
                                         "# Also make sure they cannot add themselves to the list (Although we cannot guard against other personal email addresses):",
                                         "#",
                                         "\$verboten{lc(\$resp{email})}++;",
                                         "",
                                         "&db_conn;",
                                         "if (\$back2 eq '')\t\t# Don't send emails if we are being asked to go back",
                                         "{",
                                         "my \$sent;",
                                         "my \@sendit  = split(/\$array_sep/,\$resp{_Q2});",
                                         "our \$story = '';",
                                         "#",
                                         "# Pull in existing ufields (\$resp hash is already present, as we are in godb/qt-libdb context",
                                         "#",
                                         "undef %ufields;",
                                         "my \$ufile = \"\$qt_root/\$config{participant}/web/u\$resp{'token'}.pl\";",
                                         "my_require (\"\$ufile\",0);",
                                         "\$resp{peerlisthtml} = \"\";",
                                         "foreach (my \$n=1;\$n<=\$config{npeer};\$n++)",
                                         "{",
                                         "#\t\t&debug(\"I am here in part 2: \$n\");",
                                         "\$resp{peerlisthtml} .= qq{\$n. \\[%peerfullname\$n%] <BR>\\n} if (\$resp{\"peerfullname\$n\"});",
                                         "if (\$sendit[\$n-1])",
                                         "{",
                                         "my \$fullname = mk_fullname(\$resp{\"peerfirstname\$n\"},\$resp{\"peerlastname\$n\"});",
                                         "my \$email = lc(\$resp{\"peeremail\$n\"});",
                                         "#\t\t\t\talert(\"Sending email to \$fullname\");",
                                         "&debug(qq{Trying \$fullname: \$email\"});",
                                         "#\t\t\t\tmy \$pwd = &db_case_id_name_role(\$config{index},\$config{peer},\$resp{id},\$fullname,'Peer');",
                                         "my \$pwd = \$resp{\"peerpassword\$n\"};\t# Do we have a password for them already ?",
                                         "if (\$email ne '')\t\t\t# Only send email if we have an email address",
                                         "{",
                                         "#",
                                         "# Put together the context information",
                                         "#",
                                         "my \$colleague = \$1 if (\$fullname =~ /(\\w+)\\s+/);",
                                         "\$story .= qq{<TR class=\"options\"><TD >Sent peer email to \$fullname (\$email)</TD></TR>\\n};",
                                         "queue_invite(\$config{peer},'peer',\$resp{id},\$pwd,\$email);",
                                         "\$sent++;",
                                         "\$resp{\"peersent\$n\"} = time();\t\t\t# Timestamp when it was last sent",
                                         "debug(\"Saving send time as \".\$resp{\"peersent\$n\"});",
                                         "}",
                                         "}",
                                         "}",
                                         "\$resp{peerlisttxt} = \$resp{peerlisthtml};",
                                         "\$resp{peerlisttxt} =~ s/<br>//ig;",
                                         "#\$ufields{ext_msg} = \$save_msg;",
                                         "save_ufile(\$config{participant},\$resp{token});",
                                         "if (\$story eq '')",
                                         "{",
                                         "\$story = qq{<TR class=\"options\"><TD >(None sent)</TD></TR>};",
                                         "}",
                                         "\$story = qq{<TABLE class=\"mytable\" border=0 cellspacing=0 cellpadding=5><TR class=\"heading\"><TH >Sending emails to peers</TH></TR>\$story</TABLE><BR>};",
                                         "# Save the data back to the ext_ fields for Ron",
                                         "foreach (my \$n=1;\$n<=\$config{npeer};\$n++)",
                                         "{",
                                         "\$resp{\"ext_peerfirstname\$n\"} = \$resp{\"peerfirstname\$n\"};",
                                         "\$resp{\"ext_peerlastname\$n\"} = \$resp{\"peerlastname\$n\"};",
                                         "\$resp{\"ext_peeremail\$n\"} = \$resp{\"peeremail\$n\"};",
                                         "\$resp{\"ext_peerfullname\$n\"} = mk_fullname(\$resp{\"peerfirstname\$n\"},\$resp{\"peerlastname\$n\"});",
                                         "}",
                                         "",
                                         "# Now recalculate mask in case we are coming back to it.",
                                         "foreach (my \$n=1;\$n<=\$config{npeer};\$n++)",
                                         "{",
                                         "\$peers[\$n-1] = 0;",
                                         "\$checks[\$n-1] = '';",
                                         "my \$fullname = mk_fullname(\$resp{\"peerfirstname\$n\"},\$resp{\"peerlastname\$n\"});",
                                         "if (\$fullname ne '')",
                                         "{",
                                         "\$peers[\$n-1] = 1;",
                                         "\$tpeers[\$n-1] = \"\$n. \$fullname (\".\$resp{\"peeremail\$n\"}.\")\";",
                                         "my \$pwd = \$resp{\"peerpassword\$n\"};",
                                         "\$tpeers[\$n-1] .= qq{[\$pwd]} if \$show_password;",
                                         "if (\$resp{\"peersent\$n\"} ne '')",
                                         "{",
                                         "my \$now_string = localtime(\$resp{\"peersent\$n\"});",
                                         "\$tpeers[\$n-1] .= qq{ <I><B>email last sent at \$now_string <I></B>};",
                                         "\$resp{\"disabled\$n\"} = \"DISABLED\";",
                                         "}",
                                         "\$checks[\$n-1] = 1 if (\$resp{\"peersent\$n\"} eq '');\t# Turn new ones (ie unsent) on",
                                         "\$checks[\$n-1] = 1 if (\$input{\"peeremail\$n\"} ne \$resp{\"ext_peeremail\$n\"});\t# Turn new ones (ie unsent) on",
                                         "my \$email = \$resp{\"peeremail\$n\"};",
                                         "if (\$verboten{lc(\$email)})",
                                         "{",
                                         "\$tpeers[\$n-1] .= qq{<FONT color=\"red\" size=\"+1\"> - <B>Error:</B> You cannot include yourself, your supervising manager or partner on this list, please go back and correct it.</FONT>};",
                                         "\$checks[\$n-1] = -1;\t# -1 Means disable the control",
                                         "}",
                                         "\$checks[\$n-1] = 0 if (\$resp{\"disabled\$n\"} ne '');",
                                         "}",
                                         "}",
                                         "\$resp{mask_peers} = join(\$array_sep,\@peers);",
                                         "\$resp{maskt_peers} = join(\$array_sep,\@tpeers);",
                                         "\$resp{_Q2} = join(\$array_sep,\@checks);",
                                         "\$data_dir = \"\${qt_root}/\$input{survey_id}/web\";",
                                         "&qt_save;",
                                         "if (\$sent) {",
                                         "my \$ret = &send_invite_now(\$config{execq10}, 'execq10', \$ufields{id}, \$ufields{password}, \$ufields{execemail}) if (\$ufields{execemail} ne '');",
                                         "&add2body(\"<!-- Sent email to Exec: \$ufields{execname} (\$ufields{execemail}) \$ret -->\");",
                                         "foreach (my \$n=1;\$n<=\$config{nboss};\$n++)",
                                         "{",
                                         "\$ufields{bossfullname} = \$ufields{\"bossfullname\$n\"};",
                                         "if (\$ufields{\"bossemail\$n\"} ne '')",
                                         "{",
                                         "my \$ret = &send_invite_now(\$config{bossq10}, 'bossq10', \$ufields{id}, \$ufields{password}, \$ufields{\"bossemail\$n\"});",
                                         "&add2body(qq{<!-- Sent email to Boss: \$ufields{\"bossfullname\$n\"} (\$ufields{\"bossemail\$n\"}) \$ret -->});",
                                         "}",
                                         "}",
                                         "}",
                                         "}",
                                         "&db_disc;",
                                       ],
                        _dataInfo   => [],
                        _label      => "2B",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "Send out emails and assemble a story",
                        _qnum       => 7,
                        _qtype      => 27,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _dataInfo   => [],
                        _label      => "SENT",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "<BOGUS>\$\$story You can come back and add to the list later if you wish.",
                        _qnum       => 8,
                        _qtype      => 7,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames => [],
                        _attributes => [],
                        _code       => [
                                         "my \$dcount = &count_data;",
                                         "&debug(\"Datacount = \$dcount\");",
                                         "if (\$dcount>0) {\$q_no = goto_qlab(\"LAST\") - 1;}",
                                         "if (\$dcount==0) {&db_conn;&db_set_status(\$survey_id,\$resp{id},\$resp{token},0,0)};",
                                       ],
                        _dataInfo   => [],
                        _label      => "CHECK",
                        _opt        => { instr => "", scale => 0 },
                        _prompt     => "Check if we have enough data to allow submission of form",
                        _qnum       => 9,
                        _qtype      => 27,
                        _scores     => [],
                        _setvalues  => [],
                        _skips      => [],
                        _vars       => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames    => [],
                        _attributes    => [],
                        _dataInfo      => [
                                            {
                                              "pos" => 0,
                                              rkey => "ext_BACK2",
                                              type => "hidden",
                                              var => "BACK2",
                                              var_label => "See external page \"nodata.htm\"",
                                            },
                                          ],
                        _external_info => {
                                            names    => [undef, "BACK2"],
                                            options  => {
                                                          "" => {
                                                                alt => "HOME",
                                                                onclick => "document.location='/cgi-mr/pwikit_login.pl?id=<%id%>&password=<%token%>'",
                                                                tabindex => -1,
                                                                type => "BUTTON",
                                                                value => " HOME ",
                                                              },
                                                          BACK2 => { name => "BACK2", type => "hidden" },
                                                        },
                                            "values" => { "" => [" HOME ", " GO BACK "] },
                                          },
                        _label         => "NODATA",
                        _opt           => { external => "nodata.htm", instr => "", scale => 0 },
                        _prompt        => "See external page \"nodata.htm\"",
                        _qnum          => 10,
                        _qtype         => 7,
                        _scores        => [],
                        _setvalues     => [],
                        _skips         => [],
                        _vars          => [],
                      }, "TPerl::Survey::Question"),
                      bless({
                        _a_varnames    => [],
                        _attributes    => [],
                        _dataInfo      => [
                                            {
                                              "pos" => 0,
                                              rkey => "ext_finish",
                                              type => "hidden",
                                              var => "finish",
                                              var_label => "This is implemented as an external",
                                            },
                                            {
                                              "pos" => 0,
                                              rkey => "ext_q_labs",
                                              var => "q_labs",
                                              var_label => "This is implemented as an external",
                                            },
                                            {
                                              "pos" => 0,
                                              rkey => "ext_BACK2",
                                              type => "hidden",
                                              var => "BACK2",
                                              var_label => "This is implemented as an external",
                                            },
                                          ],
                        _external_info => {
                                            names    => ["finish", "q_labs", undef, "BACK2"],
                                            options  => {
                                                          "" => {
                                                                onclick => "document.q.finish.value='';",
                                                                type    => "SUBMIT",
                                                                value   => " SUBMIT ",
                                                              },
                                                          BACK2 => { name => "BACK2", type => "hidden" },
                                                          finish => { name => "finish", type => "hidden" },
                                                          q_labs => {},
                                                        },
                                            "values" => { "" => [" SUBMIT ", "NOT YET", " GO BACK "] },
                                          },
                        _label         => "LAST",
                        _opt           => { external => "last.htm", instr => "", scale => 0 },
                        _prompt        => "This is implemented as an external",
                        _qnum          => 11,
                        _qtype         => 7,
                        _scores        => [],
                        _setvalues     => [],
                        _skips         => [],
                        _vars          => [],
                      }, "TPerl::Survey::Question"),
                    ],
}, "TPerl::Survey")